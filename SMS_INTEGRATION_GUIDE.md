# 短信验证码集成使用指南

## 功能概述

在达人/企业用户的个人资料设置页面中，已集成短信验证码功能，确保手机号码的真实性和有效性。

## 功能特点

### 1. 手机号码验证流程
- 用户输入手机号码
- 点击"发送验证码"按钮
- 系统发送4位数字验证码到指定手机
- 用户输入验证码进行验证
- 验证成功后手机号码绑定到账户

### 2. 安全验证机制
- 只有验证成功的手机号码才能保存到数据库
- 防止虚假手机号码注册
- 确保用户身份真实性

### 3. 用户体验优化
- 实时状态提示
- 错误信息清晰显示
- 验证成功后自动更新表单

## 使用步骤

### 达人/企业用户操作流程

1. **登录账户**
   - 使用邮箱和密码登录系统

2. **进入个人资料设置**
   - 点击导航菜单中的"账号设置"
   - 选择"个人资料"标签页

3. **绑定手机号码**
   - 在"手机号码"字段输入手机号
   - 点击"发送验证码"按钮
   - 查看手机短信，获取4位验证码

4. **验证手机号码**
   - 在验证码输入框中输入收到的4位数字
   - 点击"验证"按钮
   - 验证成功后显示"验证成功！手机号码已绑定"

5. **保存资料**
   - 验证成功后，"保存更改"按钮变为可用状态
   - 点击保存，手机号码将保存到数据库

## 技术实现

### API配置
- **服务商**: 短信宝
- **接口地址**: `https://api.smsbao.com/sms`
- **用户名**: `luchuguo`
- **密码**: MD5加密处理

### 验证逻辑
```javascript
// 发送验证码
const sendSmsCode = async () => {
  // 1. 验证手机号格式
  // 2. 生成4位随机验证码
  // 3. 调用短信API发送
  // 4. 处理响应结果
}

// 验证验证码
const verifySmsCode = () => {
  // 1. 检查验证码输入
  // 2. 比对生成的验证码
  // 3. 更新验证状态
  // 4. 允许保存资料
}
```

### 数据库更新
- 验证成功后，手机号码保存到 `user_profiles` 表的 `phone` 字段
- 同时更新 `updated_at` 时间戳

## 错误处理

### 常见错误及解决方案

1. **手机号格式错误**
   - 确保输入11位数字，以1开头
   - 支持13-19开头的手机号

2. **验证码发送失败**
   - 检查网络连接
   - 确认手机号正确
   - 查看控制台错误信息

3. **验证码错误**
   - 确认输入的4位数字正确
   - 注意大小写和空格
   - 重新发送验证码

4. **保存失败**
   - 确保手机号已验证
   - 检查用户登录状态
   - 查看错误提示信息

## 安全注意事项

1. **验证码有效期**: 30秒内有效
2. **发送频率限制**: 避免频繁发送
3. **数据保护**: 验证码不在前端存储
4. **API安全**: 使用HTTPS加密传输

## 测试建议

### 开发测试
1. 使用测试手机号：`18638014853`
2. 查看浏览器控制台日志
3. 验证API调用和响应

### 生产环境
1. 使用真实手机号测试
2. 验证短信接收情况
3. 测试各种错误场景

## 维护说明

### 定期检查
- 短信API余额状态
- 发送成功率统计
- 用户反馈问题

### 更新维护
- 监控API响应变化
- 更新错误处理逻辑
- 优化用户体验

## 联系支持

如遇到技术问题，请联系开发团队：
- 检查控制台错误信息
- 提供具体的操作步骤
- 附上错误截图或日志 